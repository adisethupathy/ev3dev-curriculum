"""
The Final Project for CSSE120
This is the pc code to run on my laptop
Author: Ryan Taylor
"""

import ev3dev.ev3 as ev3
import time

import robot_controller as robo

import tkinter
from tkinter import ttk
import mqtt_remote_method_calls as com


class MyDelegate(object):

    def __init__(self):
        self.running = True

    def set_led(self, led_side_string, led_color_string):
        #Change this command to be for shipping and not for setting the LEDs

        print("Received: {} {}".format(led_side_string, led_color_string))
        led_side = None
        if led_side_string == "left":
            led_side = ev3.Leds.LEFT
        elif led_side_string == "right":
            led_side = ev3.Leds.RIGHT

        led_color = None
        if led_color_string == "green":
            led_color = ev3.Leds.GREEN
        elif led_color_string == "red":
            led_color = ev3.Leds.RED
        elif led_color_string == "black":
            led_color = ev3.Leds.BLACK

        if led_side is None or led_color is None:
            print("Invalid parameters sent to set_led. led_side_string = {} led_color_string = {}".format(
                led_side_string, led_color_string))
        else:
            ev3.Leds.set_color(led_side, led_color)


def main():
    print("--------------------------------------------")
    print(" Amazon Fulfillment. How may I help?")
    print("--------------------------------------------")
    ev3.Sound.speak("Amazon Fulfillment").wait()
    print("Press the touch sensor to exit this program.")

    my_delegate = MyDelegate()
    mqtt_client = com.MqttClient(my_delegate)
    mqtt_client.connect_to_pc()


main()